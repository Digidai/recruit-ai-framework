#!/usr/bin/env python3
"""Fix remaining Chinese text in name_en fields by translating annotations."""

import json
import re

# Chinese to English annotation translations
ANNOTATIONS = {
    "招聘营销": "Recruitment Marketing",
    "程序化招聘广告": "Programmatic Job Ads",
    "AI 招聘广告优化": "AI Job Ad Optimization",
    "顶尖自由职业者": "Top Freelancers",
    "咨询人才": "Consulting Talent",
    "数据科学档案": "Data Science Profiles",
    "AI/ML 社区": "AI/ML Community",
    "算法": "Algorithms",
    "竞技编程": "Competitive Programming",
    "作品集": "Portfolio",
    "论文/作者": "Papers/Authors",
    "预印本": "Preprints",
    "研究者 ID": "Researcher ID",
    "德语区": "German-speaking Region",
    "技术社区": "Tech Community",
    "通用格式": "Universal Format",
    "专业技能": "Professional Skills",
    "领导力": "Leadership",
    "欧盟隐私盾": "EU Privacy Shield",
    "隐私信任标志": "Privacy Trust Mark",
    "招聘数据合规": "Recruitment Data Compliance",
    "欧盟 AI 法规": "EU AI Regulation",
    "AI 伦理指南": "AI Ethics Guidelines",
    "隐私工具审计": "Privacy Tool Audit",
    "反歧视指南": "Anti-Discrimination Guidelines",
    "视频面试": "Video Interview",
    "结构化视频面试": "Structured Video Interview",
    "按需视频面试": "On-Demand Video Interview",
    "AI 视频分析": "AI Video Analytics",
    "AI 对话式面试": "AI Conversational Interview",
    "AI 面试分析": "AI Interview Analytics",
    "情绪分析": "Emotion Analytics",
    "技术面试": "Technical Interview",
    "远程技术评估": "Remote Technical Assessment",
    "视频面试礼仪": "Video Interview Etiquette",
    "招聘协作": "Recruitment Collaboration",
    "面试安排": "Interview Scheduling",
    "面试日程": "Interview Scheduling",
    "日历整合": "Calendar Integration",
    "会议整合": "Meeting Integration",
    "智能日程助手": "Smart Scheduling Assistant",
    "记录与洞察": "Recording & Insights",
    "即时笔记": "Instant Notes",
    "反馈收集": "Feedback Collection",
    "面试辅助": "Interview Assistance",
    "薪酬数据": "Compensation Data",
    "实时薪酬": "Real-time Compensation",
    "科技薪酬": "Tech Compensation",
    "高管薪酬": "Executive Compensation",
    "全球薪酬": "Global Compensation",
    "薪酬基准": "Compensation Benchmarking",
    "入职培训": "Onboarding",
    "入职自动化": "Onboarding Automation",
    "员工入职体验": "Employee Onboarding Experience",
    "一体化入职": "All-in-One Onboarding",
    "远程入职": "Remote Onboarding",
    "跨境入职": "Cross-Border Onboarding",
    "快速入职": "Rapid Onboarding",
    "入职检查清单": "Onboarding Checklist",
    "签名审计": "Signature Audit",
    "合规自动化": "Compliance Automation",
    "背调订单": "Background Check Orders",
    "API 调用": "API Calls",
    "信用报告": "Credit Report",
    "候选人门户": "Candidate Portal",
    "结果仪表板": "Results Dashboard",
    "学位验证": "Degree Verification",
    "职业验证": "Employment Verification",
    "专业执照": "Professional License",
    "招聘工作流": "Recruiting Workflow",
    "批量筛选": "Bulk Screening",
    "持续监测": "Continuous Monitoring",
    "技能评估": "Skills Assessment",
    "社交筛查": "Social Screening",
    "社交媒体筛查": "Social Media Screening",
    "全球背调": "Global Background Check",
    "企业背调": "Enterprise Background Check",
    "教育验证": "Education Verification",
    "犯罪背景": "Criminal Background",
    "身份验证": "Identity Verification",
    "药物筛查": "Drug Screening",
    "评估整合": "Assessment Integration",
    "技能验证": "Skills Verification",
    "在线技能测试": "Online Skills Testing",
    "招聘技能测试": "Recruiting Skills Tests",
    "候选人技能验证": "Candidate Skills Verification",
    "预测评估": "Predictive Assessment",
    "技术技能评估": "Technical Skills Assessment",
    "工作模拟": "Job Simulation",
    "软技能评估": "Soft Skills Assessment",
    "技术面试平台": "Technical Interview Platform",
    "远程技术面试": "Remote Technical Interview",
    "AI 技术面试官": "AI Technical Interviewer",
    "代码挑战": "Coding Challenges",
    "编程测试": "Coding Tests",
    "技术评估平台": "Technical Assessment Platform",
    "企业编程测试": "Enterprise Coding Tests",
    "开发者技能评估": "Developer Skills Assessment",
    "数据工程评估": "Data Engineering Assessment",
    "DevOps 评估": "DevOps Assessment",
    "云技能认证": "Cloud Skills Certification",
    "技术认证": "Tech Certification",
    "AI 认证": "AI Certification",
    "数据科学认证": "Data Science Certification",
    "区块链认证": "Blockchain Certification",
    "网络安全认证": "Cybersecurity Certification",
    "人格测评": "Personality Assessment",
    "招聘人格评估": "Recruiting Personality Assessment",
    "工作风格评估": "Work Style Assessment",
    "性格分析": "Personality Analysis",
    "DISC 评估": "DISC Assessment",
    "霍根评估": "Hogan Assessments",
    "企业人才评估": "Enterprise Talent Assessment",
    "认知能力测试": "Cognitive Ability Testing",
    "一般能力测试": "General Aptitude Testing",
    "认知评估": "Cognitive Assessment",
    "逻辑推理": "Logical Reasoning",
    "适应性测试": "Adaptive Testing",
    "数字推理": "Numerical Reasoning",
    "语言推理": "Verbal Reasoning",
    "抽象推理": "Abstract Reasoning",
    "空间推理": "Spatial Reasoning",
    "行为面试": "Behavioral Interview",
    "AI 行为预测": "AI Behavior Prediction",
    "行为洞察": "Behavioral Insights",
    "游戏化评估": "Gamified Assessment",
    "游戏化招聘": "Gamified Recruiting",
    "AI 人才评估": "AI Talent Assessment",
    "多元评估平台": "Multi-Assessment Platform",
    "全球人才评估": "Global Talent Assessment",
    "企业人才测评": "Enterprise Talent Assessment",
    "科学评估": "Scientific Assessment",
    "人才识别": "Talent Identification",
    "入职前测试": "Pre-Employment Testing",
    "评估测试库": "Assessment Test Library",
    "诚信测试": "Integrity Testing",
    "数学能力": "Math Aptitude",
    "机械推理": "Mechanical Reasoning",
    "情境判断": "Situational Judgment",
    "学习敏捷性": "Learning Agility",
    "情商测试": "EQ Testing",
    "社交智能": "Social Intelligence",
    "招聘 AI 平台": "Recruiting AI Platform",
    "AI 招聘助手": "AI Recruiting Assistant",
    "对话式 AI 招聘": "Conversational AI Recruiting",
    "AI 人才智能": "AI Talent Intelligence",
    "AI 简历解析": "AI Resume Parsing",
    "AI 智能匹配": "AI Smart Matching",
    "AI 候选人发现": "AI Candidate Discovery",
    "AI 招聘分析": "AI Recruiting Analytics",
    "AI 人才获取": "AI Talent Acquisition",
    "AI 招聘优化": "AI Recruiting Optimization",
    "简历解析 API": "Resume Parsing API",
    "简历解析引擎": "Resume Parsing Engine",
    "智能解析": "Smart Parsing",
    "语义解析": "Semantic Parsing",
    "解析 API": "Parsing API",
    "多语言解析": "Multilingual Parsing",
    "AI 候选人匹配": "AI Candidate Matching",
    "技能匹配引擎": "Skills Matching Engine",
    "JD 匹配": "JD Matching",
    "人才匹配": "Talent Matching",
    "简历匹配": "Resume Matching",
    "角色匹配": "Role Matching",
    "岗位匹配": "Job Matching",
    "招聘自动化": "Recruiting Automation",
    "工作流自动化": "Workflow Automation",
    "CRM 自动化": "CRM Automation",
    "消息自动化": "Messaging Automation",
    "邮件自动化": "Email Automation",
    "面试自动化": "Interview Automation",
    "招聘聊天机器人": "Recruiting Chatbot",
    "AI 招聘聊天": "AI Recruiting Chat",
    "候选人互动机器人": "Candidate Engagement Bot",
    "招聘对话 AI": "Recruiting Conversational AI",
    "申请机器人": "Application Bot",
    "职位机器人": "Job Bot",
    "人才情报": "Talent Intelligence",
    "劳动力情报": "Workforce Intelligence",
    "人才市场分析": "Talent Market Analytics",
    "AI 人才洞察": "AI Talent Insights",
    "实时人才数据": "Real-time Talent Data",
    "多元化分析": "Diversity Analytics",
    "人才流动分析": "Talent Flow Analytics",
    "离职预测": "Attrition Prediction",
    "劳动力规划": "Workforce Planning",
    "招聘分析": "Recruiting Analytics",
    "招聘仪表板": "Recruiting Dashboard",
    "人力分析": "People Analytics",
    "招聘指标": "Recruiting Metrics",
    "漏斗分析": "Funnel Analytics",
    "招聘 ROI": "Recruiting ROI",
    "候选人体验分析": "Candidate Experience Analytics",
    "多元化报告": "Diversity Reporting",
    "AI 绩效预测": "AI Performance Prediction",
    "销售绩效预测": "Sales Performance Prediction",
    "员工绩效预测": "Employee Performance Prediction",
    "绩效数据": "Performance Data",
    "AI 留任预测": "AI Retention Prediction",
    "员工留任": "Employee Retention",
    "留任分析": "Retention Analytics",
    "员工参与度": "Employee Engagement",
    "离职分析": "Turnover Analytics",
    "人力资源分析": "HR Analytics",
    "劳动力分析": "Workforce Analytics",
    "员工分析": "Employee Analytics",
    "企业人力分析": "Enterprise People Analytics",
    "人力成本分析": "People Cost Analytics",
    "多元化招聘": "Diversity Recruiting",
    "多元化招聘平台": "Diversity Recruiting Platform",
    "多元化人才平台": "Diversity Talent Platform",
    "残障人才": "Disability Talent",
    "退伍军人招聘": "Veteran Recruiting",
    "包容性招聘": "Inclusive Recruiting",
    "多元化招聘数据": "Diversity Recruiting Data",
    "AI 公平招聘": "AI Fair Recruiting",
    "算法公平性": "Algorithmic Fairness",
    "偏见检测": "Bias Detection",
    "偏见审计": "Bias Audit",
    "公平招聘": "Fair Hiring",
    "招聘公平性": "Recruiting Fairness",
    "无偏见写作": "Bias-Free Writing",
    "包容性语言检查": "Inclusive Language Check",
    "JD 多元化评分": "JD Diversity Scoring",
    "JD 偏见检测": "JD Bias Detection",
    "性别中立语言": "Gender-Neutral Language",
    "包容性 JD 写作": "Inclusive JD Writing",
    "远程职位板": "Remote Job Board",
    "初创公司远程": "Startup Remote",
    "技术远程": "Tech Remote",
    "设计远程": "Design Remote",
    "欧洲远程": "EU Remote",
    "异步工作": "Async Work",
    "自由职业者管理": "Freelancer Management",
    "自由职业 CRM": "Freelance CRM",
    "承包商管理": "Contractor Management",
    "外包管理": "Outsourcing Management",
    "合同工合规": "Contractor Compliance",
    "全球化雇佣": "Global Employment",
    "EOR 服务": "EOR Service",
    "全球薪资": "Global Payroll",
    "国际雇佣": "International Employment",
    "全球合规": "Global Compliance",
    "全球移动": "Global Mobility",
    "签证移民": "Visa Immigration",
    "工作许可管理": "Work Permit Management",
    "全球迁移": "Global Relocation",
    "移民服务平台": "Immigration Service Platform",
    "国际员工转移": "International Employee Transfer",
    "签证状态追踪": "Visa Status Tracking",
    "全球员工安全": "Global Employee Safety",
    "差旅风险管理": "Travel Risk Management",
    "出差安全": "Business Travel Safety",
    "员工定位": "Employee Location",
    "差旅警报": "Travel Alerts",
    "健康安全合规": "Health Safety Compliance",
    "数据整合": "Data Integration",
    "HR 系统整合": "HR System Integration",
    "招聘整合平台": "Recruiting Integration Platform",
    "人才数据整合": "Talent Data Integration",
    "HR 数据同步": "HR Data Sync",
    "嵌入式整合": "Embedded Integration",
    "开放职位 API": "Job Posting API",
    "通用 ATS API": "Universal ATS API",
    "招聘 API": "Recruiting API",
    "职位数据 API": "Job Data API",
    "人才 API": "Talent API",
    "职位分发": "Job Distribution",
    "职位板整合": "Job Board Integration",
    "招聘渠道整合": "Recruiting Channel Integration",
    "一键发布": "One-Click Posting",
    "程序化投放": "Programmatic Posting",
    "职位聚合": "Job Aggregation",
    "API 开发工具": "API Dev Tools",
    "职位发布调试": "Job Posting Debug",
    "API 测试": "API Testing",
    "Webhook 测试": "Webhook Testing",
    "ATS 数据调试": "ATS Data Debug",
    "HR 集成调试": "HR Integration Debug",
    "候选人旅程图": "Candidate Journey Map",
    "用户旅程图": "User Journey Map",
    "体验流程图": "Experience Flowchart",
    "旅程映射": "Journey Mapping",
    "服务蓝图": "Service Blueprint",
    "体验地图": "Experience Map",
    "NPS 调查": "NPS Survey",
    "候选人反馈": "Candidate Feedback",
    "体验调查": "Experience Survey",
    "员工反馈": "Employee Feedback",
    "调查分析": "Survey Analytics",
    "HR 调查": "HR Survey",
    "候选人流失分析": "Candidate Drop-off Analysis",
    "漏斗可视化": "Funnel Visualization",
    "产品分析": "Product Analytics",
    "行为分析": "Behavior Analytics",
    "转化率优化": "Conversion Optimization",
    "体验分析": "Experience Analytics",
    "招聘品牌": "Employer Brand",
    "公司评价": "Company Reviews",
    "雇主品牌管理": "Employer Brand Management",
    "雇主口碑": "Employer Reputation",
    "职业页面": "Career Page",
    "职业网站建设": "Career Site Builder",
    "招聘营销平台": "Recruitment Marketing Platform",
    "招聘 CRM": "Recruiting CRM",
    "雇主品牌内容": "Employer Brand Content",
    "校招页面": "Campus Recruiting Page",
    "招聘内容创作": "Recruiting Content Creation",
    "员工生成内容": "Employee Generated Content",
    "雇主品牌故事": "Employer Brand Stories",
    "员工见证": "Employee Testimonials",
    "招聘视频": "Recruiting Video",
    "员工故事视频": "Employee Story Video",
    "入门指南": "Beginner Guide",
    "高级技巧": "Advanced Techniques",
    "速查表": "Cheat Sheet",
    "实用贴士": "Practical Tips",
    "职位描述": "Job Description",
    "JD 写作助手": "JD Writing Assistant",
    "AI JD 生成": "AI JD Generation",
    "JD 分析优化": "JD Analysis & Optimization",
    "职位描述模板": "JD Templates",
    "智能 JD 写作": "Smart JD Writing",
    "JD 库": "JD Library",
    "面试问题": "Interview Questions",
    "面试问题库": "Interview Question Bank",
    "结构化面试": "Structured Interview",
    "面试指南": "Interview Guide",
    "面试模板": "Interview Templates",
    "行为面试题库": "Behavioral Interview Questions",
    "AI 面试问题": "AI Interview Questions",
    "邮件模板": "Email Templates",
    "招聘邮件模板": "Recruiting Email Templates",
    "候选人沟通": "Candidate Communication",
    "邮件序列": "Email Sequences",
    "招聘信息模板": "Recruiting Message Templates",
    "AI 邮件写作": "AI Email Writing",
    "招聘指标仪表板": "Recruiting Metrics Dashboard",
    "HR 仪表板": "HR Dashboard",
    "招聘报告模板": "Recruiting Report Templates",
    "人才分析仪表板": "Talent Analytics Dashboard",
    "多元化仪表板": "Diversity Dashboard",
    "质量跟踪表": "Quality Tracking Sheet",
    "招聘项目管理": "Recruiting Project Management",
    "看板管理": "Kanban Management",
    "招聘流程管理": "Recruiting Process Management",
    "团队协作": "Team Collaboration",
    "任务管理": "Task Management",
    "时间线规划": "Timeline Planning",
    "敏捷招聘": "Agile Recruiting",
    "招聘日历": "Recruiting Calendar",
    "甘特图": "Gantt Chart",
    "项目规划": "Project Planning",
    "资源规划": "Resource Planning",
    "招聘规划": "Recruiting Planning",
    "招聘预算": "Recruiting Budget",
    "预算规划": "Budget Planning",
    "招聘成本": "Recruiting Cost",
    "费用跟踪": "Expense Tracking",
    "成本分析": "Cost Analysis",
    "ROI 计算": "ROI Calculator",
    "招聘工具对比": "Recruiting Tool Comparison",
    "ATS 对比": "ATS Comparison",
    "HR 软件对比": "HR Software Comparison",
    "招聘软件评测": "Recruiting Software Reviews",
    "HR 技术评估": "HR Tech Evaluation",
    "工具评估": "Tool Evaluation",
    "招聘社区": "Recruiting Community",
    "招聘论坛": "Recruiting Forum",
    "HR 社区": "HR Community",
    "人才获取社区": "Talent Acquisition Community",
    "招聘网络": "Recruiting Network",
    "HR 领袖社区": "HR Leaders Community",
    "技术招聘社区": "Tech Recruiting Community",
    "招聘播客": "Recruiting Podcast",
    "HR 播客": "HR Podcast",
    "人才播客": "Talent Podcast",
    "招聘对话": "Recruiting Conversations",
    "职场播客": "Workplace Podcast",
    "未来工作播客": "Future of Work Podcast",
    "招聘课程": "Recruiting Course",
    "LinkedIn 招聘认证": "LinkedIn Recruiting Certification",
    "人才获取培训": "Talent Acquisition Training",
    "技术招聘课程": "Tech Recruiting Course",
    "招聘技能培训": "Recruiting Skills Training",
    "多元化招聘培训": "Diversity Recruiting Training",
    "招聘研究": "Recruiting Research",
    "人才趋势报告": "Talent Trends Report",
    "招聘行业报告": "Recruiting Industry Report",
    "HR 研究": "HR Research",
    "劳动力报告": "Workforce Report",
    "薪酬报告": "Compensation Report",
    "HR 行业报告": "HR Industry Report",
    "个人页 X-Ray": "Profile X-Ray",
    "公司员工 X-Ray": "Company Employee X-Ray",
    "用户搜索": "User Search",
    "代码搜索": "Code Search",
    "议题/PR 搜索": "Issues/PR Search",
    "组织成员搜索": "Organization Members Search",
    "布尔搜索实战": "Boolean Search Practice",
    "Google CSE 配置": "Google CSE Configuration",
    "X-Ray 生成器": "X-Ray Generator",
    "自定义搜索": "Custom Search",
    "高级搜索": "Advanced Search",
    "AI 搜索助手": "AI Search Assistant",
    "候选人搜索": "Candidate Search",
    "基础搜索": "Basic Search",
    "高级过滤": "Advanced Filtering",
    "保存搜索": "Saved Search",
    "推荐": "Recommendations",
    "招聘搜索": "Recruiting Search",
    "人才搜索": "Talent Search",
    "组合搜索": "Combined Search",
    "多条件搜索": "Multi-Criteria Search",
    "HR 数据库搜索": "HR Database Search",
    "自建人才库搜索": "Internal Talent Pool Search",
    "CRM 搜索技巧": "CRM Search Tips",
    "ATS 搜索优化": "ATS Search Optimization",
    "数据库查询": "Database Query",
    "综合候选人搜索": "Comprehensive Candidate Search",
    "多平台搜索": "Multi-Platform Search",
    "社交媒体搜索": "Social Media Search",
    "专业社区搜索": "Professional Community Search",
    "技术社区搜索": "Tech Community Search",
    "地域限定搜索": "Location-Specific Search",
    "学术搜索": "Academic Search",
    "候选人调研": "Candidate Research",
    "联系方式查找": "Contact Finder",
    "企业邮箱查找": "Business Email Finder",
    "邮箱验证": "Email Verification",
    "批量邮箱验证": "Bulk Email Verification",
    "邮箱格式查询": "Email Format Lookup",
    "社交档案搜索": "Social Profile Search",
    "职业档案搜索": "Professional Profile Search",
    "联系信息聚合": "Contact Info Aggregation",
    "销售情报": "Sales Intelligence",
    "数据丰富化": "Data Enrichment",
    "联系人丰富化": "Contact Enrichment",
    "公司数据丰富化": "Company Data Enrichment",
    "候选人数据丰富化": "Candidate Data Enrichment",
    "实时数据丰富化": "Real-time Data Enrichment",
    "人才数据丰富化": "Talent Data Enrichment",
    "公司画像": "Company Profiles",
    "公司信息数据库": "Company Info Database",
    "企业信息查询": "Enterprise Info Lookup",
    "公司情报": "Company Intelligence",
    "公司技术栈": "Company Tech Stack",
    "公司新闻监控": "Company News Monitoring",
    "创业公司数据库": "Startup Database",
    "公司财务数据": "Company Financial Data",
    "招聘信息监测": "Job Posting Monitoring",
    "组织架构": "Org Chart",
    "组织图工具": "Org Chart Tool",
    "企业组织结构": "Enterprise Org Structure",
    "团队结构分析": "Team Structure Analysis",
    "人员关系图": "People Relationship Map",
    "组织可视化": "Org Visualization",
    "人才情报平台": "Talent Intelligence Platform",
    "候选人情报": "Candidate Intelligence",
    "竞争人才分析": "Competitive Talent Analysis",
    "人才流动": "Talent Flow",
    "招聘竞争情报": "Recruiting Competitive Intelligence",
    "公司人才动态": "Company Talent Dynamics",
}

def translate_name(name):
    """Translate Chinese annotations in name to English."""
    # Pattern: English text followed by Chinese annotation in parentheses
    # e.g., "Clinch（招聘营销）" -> "Clinch (Recruitment Marketing)"

    pattern = r'^(.+?)（(.+?)）$'
    match = re.match(pattern, name)

    if match:
        base_name = match.group(1).strip()
        chinese_annotation = match.group(2).strip()

        # Look up translation
        if chinese_annotation in ANNOTATIONS:
            return f"{base_name} ({ANNOTATIONS[chinese_annotation]})"
        else:
            # Return base name only if no translation found
            return base_name

    # Handle M tag pattern like "LinkedIn 个人页 X-Ray（M）"
    m_pattern = r'^(.+?)（M）$'
    m_match = re.match(m_pattern, name)
    if m_match:
        chinese_part = m_match.group(1).strip()
        # Translate the Chinese part
        translations = {
            "LinkedIn 个人页 X-Ray": "LinkedIn Profile X-Ray",
            "LinkedIn 公司员工 X-Ray": "LinkedIn Company Employee X-Ray",
            "GitHub 用户搜索": "GitHub User Search",
            "GitHub 代码搜索": "GitHub Code Search",
            "GitHub 议题/PR 搜索": "GitHub Issues/PR Search",
            "GitHub 组织成员搜索": "GitHub Organization Members Search",
            "布尔搜索构建器": "Boolean Search Builder",
            "布尔搜索实战": "Boolean Search Practice",
            "Google CSE 配置": "Google CSE Configuration",
            "X-Ray 生成器": "X-Ray Generator",
            "高级 Google 搜索": "Advanced Google Search",
            "多平台 X-Ray": "Multi-Platform X-Ray",
        }
        if chinese_part in translations:
            return f"{translations[chinese_part]} (M)"
        return name

    return name

def process_node(node):
    """Process a single node and its children."""
    name_en = node.get('name_en', '')

    # Check if name_en contains Chinese
    if name_en and re.search(r'[\u4e00-\u9fff]', name_en):
        translated = translate_name(name_en)
        if translated != name_en:
            node['name_en'] = translated

    # Process children
    for child in node.get('children', []):
        process_node(child)

def main():
    with open('docs/tarf.json', 'r', encoding='utf-8') as f:
        data = json.load(f)

    process_node(data)

    with open('docs/tarf.json', 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)

    print("Translations updated!")

if __name__ == "__main__":
    main()
